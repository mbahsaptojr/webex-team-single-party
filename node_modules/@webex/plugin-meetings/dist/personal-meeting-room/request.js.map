{"version":3,"sources":["request.js"],"names":["PersonalMeetingRoomRequest","namespace","MEETINGS","options","userId","passcode","meetingAddress","preferred","Error","validPin","PersonalMeetingRoomUtil","getClaimPmrPin","reject","validLink","getClaimPmrLink","request","getClaimedRequestParams","StatelessSparkPlugin"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAEA;;AAEA;;;;;;AACA;;;IAGqBA,0B;;;;;;;;;;;;;;oPACnBC,S,GAAYC,mB;;;;;;;AAEZ;;;;;;6BAMSC,O,EAAS;AAChB,UAAI,CAACA,OAAD,IAAY,CAACA,QAAQC,MAArB,IAA+B,CAACD,QAAQE,QAAxC,IAAoD,CAACF,QAAQG,cAA7D,IAA+E,CAACH,QAAQI,SAA5F,EAAuG;AACrG,cAAM,IAAIC,KAAJ,CAAU,gGAAV,CAAN;AACD;AACD,UAAMC,WAAWC,eAAwBC,cAAxB,CAAuCR,QAAQE,QAA/C,CAAjB;AACA,UAAI,CAACI,QAAL,EAAe;AACb,eAAO,kBAAQG,MAAR,CAAe,IAAIJ,KAAJ,CAAU,gDAAV,CAAf,CAAP;AACD;AACD,UAAMK,YAAYH,eAAwBI,eAAxB,CAAwCX,QAAQG,cAAhD,CAAlB;AACA,UAAI,CAACO,SAAL,EAAgB;AACd,eAAO,kBAAQD,MAAR,CAAe,IAAIJ,KAAJ,CAAU,gDAAV,CAAf,CAAP;AACD;AACD,UAAMO,UAAUL,eAAwBM,uBAAxB,CAAgDH,SAAhD,EAA2DJ,QAA3D,EAAqEN,OAArE,CAAhB;AACA,aAAO,KAAKY,OAAL,CAAaA,OAAb,CAAP;AACD;;;EAvBqDE,+B;;kBAAnCjB,0B","file":"request.js","sourcesContent":["import {StatelessSparkPlugin} from '@ciscospark/spark-core';\n\nimport {MEETINGS} from '../constants';\n\nimport PersonalMeetingRoomUtil from './util';\n/**\n * @class MeetingInfoRequest\n */\nexport default class PersonalMeetingRoomRequest extends StatelessSparkPlugin {\n  namespace = MEETINGS;\n\n  /**\n   *\n   * @param {Object} options with format of {userId, passcode, meetingAddress, preferred}\n   * @returns {Promise} returns a promise that resolves/rejects the result of the request\n   * @memberof PersonalMeetingRoomRequest\n   */\n  claimPmr(options) {\n    if (!options || !options.userId || !options.passcode || !options.meetingAddress || !options.preferred) {\n      throw new Error('Claiming a PMR should be done with userId, passcode, preferred, and meetingAddress in options.');\n    }\n    const validPin = PersonalMeetingRoomUtil.getClaimPmrPin(options.passcode);\n    if (!validPin) {\n      return Promise.reject(new Error('The host pin provided was of an invalid format'));\n    }\n    const validLink = PersonalMeetingRoomUtil.getClaimPmrLink(options.meetingAddress);\n    if (!validLink) {\n      return Promise.reject(new Error('The PMR link provided was of an invalid format'));\n    }\n    const request = PersonalMeetingRoomUtil.getClaimedRequestParams(validLink, validPin, options);\n    return this.request(request);\n  }\n}\n"]}