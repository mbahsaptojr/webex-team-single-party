{"version":3,"sources":["history.js"],"names":["StatsHistory","history","index","length","undefined","data","removed","DEFAULT_STATS_HISTORY_MAX","pop","unshift"],"mappings":";;;;;;;;;;;;;;;AAAA;;;;AAEA;;;IAGqBA,Y;AACnB;;;AAGA,0BAAc;AAAA;;AACZ,SAAKC,OAAL,GAAe,EAAf;AACD;;AAED;;;;;;;0BAGM;AACJ,aAAO,KAAKA,OAAZ;AACD;;AAED;;;;;;;mCAIe;AACb,WAAKA,OAAL,GAAe,EAAf;AACD;;AAED;;;;;;;;iCAKaC,K,EAAO;AAClB,aAAO,KAAKD,OAAL,CAAaC,KAAb,CAAP;AACD;;AAED;;;;;;;oCAIgB;AACd,aAAO,KAAKD,OAAL,CAAaE,MAAb,GAAsB,CAAtB,GAA0B,KAAKF,OAAL,CAAa,CAAb,CAA1B,GAA4CG,SAAnD;AACD;;AAED;;;;;;;;;;+BAOWC,I,EAAM;AACf,UAAIC,gBAAJ;AACA,UAAI,KAAKL,OAAL,CAAaE,MAAb,IAAuBI,oCAA3B,EAAsD;AACpDD,kBAAU,KAAKL,OAAL,CAAaO,GAAb,EAAV;AACD;AACD,WAAKP,OAAL,CAAaQ,OAAb,CAAqBJ,IAArB;AACA,aAAOC,OAAP;AACD;;;;;kBAtDkBN,Y","file":"history.js","sourcesContent":["import {DEFAULT_STATS_HISTORY_MAX} from '../constants';\n\n/**\n * stores the last x filtered stream datas\n */\nexport default class StatsHistory {\n  /**\n   * instantiate our wrapped history array\n   */\n  constructor() {\n    this.history = [];\n  }\n\n  /**\n   * @returns {Array} the array of stats reports, read from [0] = most recent to [length - 1] = least recent\n   */\n  get() {\n    return this.history;\n  }\n\n  /**\n   * deletes the history array and resets it\n   * @returns {undefined}\n   */\n  clearHistory() {\n    this.history = [];\n  }\n\n  /**\n   * gets the stored stat\n   * @param {Number} index the location\n   * @returns {Object} the stat at location index\n   */\n  getHistoryAt(index) {\n    return this.history[index];\n  }\n\n  /**\n   * gets the most recently stored stat\n   * @returns {Object} the most recently added stat to the history recorder\n   */\n  getMostRecent() {\n    return this.history.length > 1 ? this.history[1] : undefined;\n  }\n\n  /**\n   * adds a history entry into the array at the head, removes from the tail\n   * if too large, returns the old tail if removed\n   * @param {WebRTCData} data filtered stats report to add to the history array\n   * @returns {Object} the removed stats report at the end that had to be removed\n   * for the new stats data report to be added to the front\n   */\n  addHistory(data) {\n    let removed;\n    if (this.history.length >= DEFAULT_STATS_HISTORY_MAX) {\n      removed = this.history.pop();\n    }\n    this.history.unshift(data);\n    return removed;\n  }\n}\n"]}